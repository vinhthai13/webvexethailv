extends ../layouts/user

block head
  link(rel="stylesheet", href="/css/profile.css")

block content
  .container.py-5
    .row
      // Sidebar
      .col-md-3.mb-4
        .card.profile-sidebar
          .card-body
            .text-center.mb-4
              .avatar-wrapper.mb-3
                if user.avatar
                  img.rounded-circle(src=user.avatar alt="Avatar" width="100")
                else
                  .avatar-placeholder
                    i.fas.fa-user.fa-2x
              h5.mb-0= user.username
              p.text-muted.small Thành viên từ #{formatDate(user.created_at)}

            hr.my-4

            .profile-menu
              a.d-block.mb-2(href="/profile" class=currentPath === '/profile' ? 'active' : '')
                i.fas.fa-user.me-2
                | Thông tin cá nhân
              a.d-block.mb-2(href="/dat-ve/lich-su")
                i.fas.fa-ticket-alt.me-2
                | Lịch sử đặt vé
              a.d-block.mb-2(href="/profile/change-password")
                i.fas.fa-key.me-2
                | Đổi mật khẩu
              a.d-block.text-danger(href="/logout")
                i.fas.fa-sign-out-alt.me-2
                | Đăng xuất

      // Main Content
      .col-md-9
        .card
          .card-header.bg-white
            h4.mb-0 Thông tin cá nhân

          .card-body
            if message
              .alert(class=`alert-${message.type}`)
                = message.content

            form(action="/profile/update" method="POST")
              .row
                .col-md-6.mb-3
                  label.form-label(for="username") Tên đăng nhập
                  input.form-control#username(type="text" value=user.username disabled)
                
                .col-md-6.mb-3
                  label.form-label(for="email") Email
                  input.form-control#email(type="email" name="email" value=user.email required)

              .row
                .col-md-6.mb-3
                  label.form-label(for="fullname") Họ và tên
                  input.form-control#fullname(type="text" name="fullname" value=user.fullname required)
                
                .col-md-6.mb-3
                  label.form-label(for="phone") Số điện thoại
                  input.form-control#phone(type="tel" name="phone" value=user.phone required)

              .row
                .col-md-12.mb-3
                  label.form-label(for="address") Địa chỉ
                  textarea.form-control#address(name="address" rows="2")= user.address

              .d-flex.justify-content-end.mt-3
                button.btn.btn-primary(type="submit")
                  i.fas.fa-save.me-2
                  | Lưu thay đổi

block scripts
  script.
    // Add any JavaScript functionality here if needed
 