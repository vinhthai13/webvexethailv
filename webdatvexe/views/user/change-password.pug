extends ../layouts/user

block head
  link(rel="stylesheet", href="/css/profile.css")

block content
  .container.py-5
    .row
      // Sidebar
      .col-md-3.mb-4
        .card.profile-sidebar
          .card-body
            .text-center.mb-4
              .avatar-wrapper.mb-3
                if user.avatar
                  img.rounded-circle(src=user.avatar alt="Avatar" width="100")
                else
                  .avatar-placeholder
                    i.fas.fa-user.fa-2x
              h5.mb-0= user.username
              p.text-muted.small Thành viên từ #{formatDate(user.created_at)}

            hr.my-4

            .profile-menu
              a.d-block.mb-2(href="/profile")
                i.fas.fa-user.me-2
                | Thông tin cá nhân
              a.d-block.mb-2(href="/dat-ve/lich-su")
                i.fas.fa-ticket-alt.me-2
                | Lịch sử đặt vé
              a.d-block.mb-2(href="/profile/change-password" class="active")
                i.fas.fa-key.me-2
                | Đổi mật khẩu
              a.d-block.text-danger(href="/logout")
                i.fas.fa-sign-out-alt.me-2
                | Đăng xuất

      // Main Content
      .col-md-9
        .card
          .card-header.bg-white
            h4.mb-0 
              i.fas.fa-key.me-2
              | Đổi mật khẩu

          .card-body
            if message
              .alert(class=`alert-${message.type}`)
                = message.content

            form(action="/profile/change-password" method="POST")
              .mb-3
                label.form-label(for="currentPassword") Mật khẩu hiện tại
                input.form-control#currentPassword(
                  type="password" 
                  name="currentPassword"
                  required
                )

              .mb-3
                label.form-label(for="newPassword") Mật khẩu mới
                input.form-control#newPassword(
                  type="password"
                  name="newPassword"
                  required
                  minlength="6"
                )

              .mb-3
                label.form-label(for="confirmPassword") Xác nhận mật khẩu mới
                input.form-control#confirmPassword(
                  type="password"
                  name="confirmPassword"
                  required
                  minlength="6"
                )

              .d-flex.justify-content-end.mt-4
                a.btn.btn-secondary.me-2(href="/profile")
                  i.fas.fa-arrow-left.me-2
                  | Quay lại
                button.btn.btn-primary(type="submit")
                  i.fas.fa-save.me-2
                  | Cập nhật mật khẩu 